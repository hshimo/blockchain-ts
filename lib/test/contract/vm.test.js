"use strict";

var _ava = _interopRequireDefault(require("ava"));

var _contractVM = _interopRequireDefault(require("../../contract/contractVM"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var contract = {
  state: {
    num: 0
  },
  reducers: {
    increment: "prev.num++;",
    decrement: "prev.num--;",
    add: "prev.num += parseInt(data.num, 10)",
    minus: "prev.num -= parseInt(data.num, 10)",
    mult: "prev.num *= parseInt(data.num, 10)",
    div: "prev.num /= parseInt(data.num, 10)"
  }
};
var vm = new _contractVM.default("test", contract, "test", "test");
console.log("code", vm.code, vm.idHash);
console.log("vm state", vm.state);
vm.messageCall("increment");
vm.messageCall("increment");
vm.messageCall("increment");
vm.messageCall("decrement");
vm.messageCall("add", {
  num: 10
});
vm.messageCall("minus", {
  num: 3
});
vm.messageCall("mult", {
  num: 2
});
vm.messageCall("div", {
  num: 4
});
console.log("vm state", vm.state, vm.getState("num"));
(0, _ava.default)(function (test) {
  test.is(vm.getState("num"), 4.5);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90ZXN0L2NvbnRyYWN0L3ZtLnRlc3QudHMiXSwibmFtZXMiOlsiY29udHJhY3QiLCJzdGF0ZSIsIm51bSIsInJlZHVjZXJzIiwiaW5jcmVtZW50IiwiZGVjcmVtZW50IiwiYWRkIiwibWludXMiLCJtdWx0IiwiZGl2Iiwidm0iLCJDb250cmFjdFZNIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJpZEhhc2giLCJtZXNzYWdlQ2FsbCIsImdldFN0YXRlIiwidGVzdCIsImlzIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOzs7O0FBRUEsSUFBTUEsUUFBbUIsR0FBRztBQUMxQkMsRUFBQUEsS0FBSyxFQUFFO0FBQUVDLElBQUFBLEdBQUcsRUFBRTtBQUFQLEdBRG1CO0FBRTFCQyxFQUFBQSxRQUFRLEVBQUU7QUFDUkMsSUFBQUEsU0FBUyxFQUFFLGFBREg7QUFFUkMsSUFBQUEsU0FBUyxFQUFFLGFBRkg7QUFHUkMsSUFBQUEsR0FBRyxFQUFFLG9DQUhHO0FBSVJDLElBQUFBLEtBQUssRUFBRSxvQ0FKQztBQUtSQyxJQUFBQSxJQUFJLEVBQUUsb0NBTEU7QUFNUkMsSUFBQUEsR0FBRyxFQUFFO0FBTkc7QUFGZ0IsQ0FBNUI7QUFZQSxJQUFNQyxFQUFFLEdBQUcsSUFBSUMsbUJBQUosQ0FBZSxNQUFmLEVBQXVCWCxRQUF2QixFQUFpQyxNQUFqQyxFQUF5QyxNQUF6QyxDQUFYO0FBRUFZLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLE1BQVosRUFBb0JILEVBQUUsQ0FBQ0ksSUFBdkIsRUFBNkJKLEVBQUUsQ0FBQ0ssTUFBaEM7QUFFQUgsT0FBTyxDQUFDQyxHQUFSLENBQVksVUFBWixFQUF3QkgsRUFBRSxDQUFDVCxLQUEzQjtBQUNBUyxFQUFFLENBQUNNLFdBQUgsQ0FBZSxXQUFmO0FBQ0FOLEVBQUUsQ0FBQ00sV0FBSCxDQUFlLFdBQWY7QUFDQU4sRUFBRSxDQUFDTSxXQUFILENBQWUsV0FBZjtBQUNBTixFQUFFLENBQUNNLFdBQUgsQ0FBZSxXQUFmO0FBQ0FOLEVBQUUsQ0FBQ00sV0FBSCxDQUFlLEtBQWYsRUFBc0I7QUFBRWQsRUFBQUEsR0FBRyxFQUFFO0FBQVAsQ0FBdEI7QUFDQVEsRUFBRSxDQUFDTSxXQUFILENBQWUsT0FBZixFQUF3QjtBQUFFZCxFQUFBQSxHQUFHLEVBQUU7QUFBUCxDQUF4QjtBQUNBUSxFQUFFLENBQUNNLFdBQUgsQ0FBZSxNQUFmLEVBQXVCO0FBQUVkLEVBQUFBLEdBQUcsRUFBRTtBQUFQLENBQXZCO0FBQ0FRLEVBQUUsQ0FBQ00sV0FBSCxDQUFlLEtBQWYsRUFBc0I7QUFBRWQsRUFBQUEsR0FBRyxFQUFFO0FBQVAsQ0FBdEI7QUFDQVUsT0FBTyxDQUFDQyxHQUFSLENBQVksVUFBWixFQUF3QkgsRUFBRSxDQUFDVCxLQUEzQixFQUFrQ1MsRUFBRSxDQUFDTyxRQUFILENBQVksS0FBWixDQUFsQztBQUVBLGtCQUFLLFVBQUFDLElBQUksRUFBSTtBQUNYQSxFQUFBQSxJQUFJLENBQUNDLEVBQUwsQ0FBUVQsRUFBRSxDQUFDTyxRQUFILENBQVksS0FBWixDQUFSLEVBQTRCLEdBQTVCO0FBQ0QsQ0FGRCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0ZXN0IGZyb20gXCJhdmFcIjtcbmltcG9ydCBDb250cmFjdFZNLCB7IEljb250cmFjdCB9IGZyb20gXCIuLi8uLi9jb250cmFjdC9jb250cmFjdFZNXCI7XG5cbmNvbnN0IGNvbnRyYWN0OiBJY29udHJhY3QgPSB7XG4gIHN0YXRlOiB7IG51bTogMCB9LFxuICByZWR1Y2Vyczoge1xuICAgIGluY3JlbWVudDogXCJwcmV2Lm51bSsrO1wiLFxuICAgIGRlY3JlbWVudDogXCJwcmV2Lm51bS0tO1wiLFxuICAgIGFkZDogXCJwcmV2Lm51bSArPSBwYXJzZUludChkYXRhLm51bSwgMTApXCIsXG4gICAgbWludXM6IFwicHJldi5udW0gLT0gcGFyc2VJbnQoZGF0YS5udW0sIDEwKVwiLFxuICAgIG11bHQ6IFwicHJldi5udW0gKj0gcGFyc2VJbnQoZGF0YS5udW0sIDEwKVwiLFxuICAgIGRpdjogXCJwcmV2Lm51bSAvPSBwYXJzZUludChkYXRhLm51bSwgMTApXCJcbiAgfVxufTtcblxuY29uc3Qgdm0gPSBuZXcgQ29udHJhY3RWTShcInRlc3RcIiwgY29udHJhY3QsIFwidGVzdFwiLCBcInRlc3RcIik7XG5cbmNvbnNvbGUubG9nKFwiY29kZVwiLCB2bS5jb2RlLCB2bS5pZEhhc2gpO1xuXG5jb25zb2xlLmxvZyhcInZtIHN0YXRlXCIsIHZtLnN0YXRlKTtcbnZtLm1lc3NhZ2VDYWxsKFwiaW5jcmVtZW50XCIpO1xudm0ubWVzc2FnZUNhbGwoXCJpbmNyZW1lbnRcIik7XG52bS5tZXNzYWdlQ2FsbChcImluY3JlbWVudFwiKTtcbnZtLm1lc3NhZ2VDYWxsKFwiZGVjcmVtZW50XCIpO1xudm0ubWVzc2FnZUNhbGwoXCJhZGRcIiwgeyBudW06IDEwIH0pO1xudm0ubWVzc2FnZUNhbGwoXCJtaW51c1wiLCB7IG51bTogMyB9KTtcbnZtLm1lc3NhZ2VDYWxsKFwibXVsdFwiLCB7IG51bTogMiB9KTtcbnZtLm1lc3NhZ2VDYWxsKFwiZGl2XCIsIHsgbnVtOiA0IH0pO1xuY29uc29sZS5sb2coXCJ2bSBzdGF0ZVwiLCB2bS5zdGF0ZSwgdm0uZ2V0U3RhdGUoXCJudW1cIikpO1xuXG50ZXN0KHRlc3QgPT4ge1xuICB0ZXN0LmlzKHZtLmdldFN0YXRlKFwibnVtXCIpLCA0LjUpO1xufSk7XG4iXX0=